function dependOn(){"use strict";return[require("communicate"),require("common"),require("util"),require("proxy"),require("analytics"),require("acro-web2pdf")]}var def;require=function(e){"use strict";return e},def=window.define?window.define:function(e,n){"use strict";return n.apply(null,[{ajax:$.ajax.bind($)}])};var exports=acom_analytics={};def(dependOn(),function(r,e,i,n,o,s){"use strict";var t,a=null;for(t in a=a||new function(){this.proxy=n.proxy.bind(this),this.LOG=e.LOG,this.getVersion=function(n){function e(e){e&&(clearTimeout(t),e.optinState&&"false"===e.optinState?SETTINGS.ANALYTICS_OPT_IN=!1:1==+e.majorVersion?(o.event(o.e.SHIM_VERSION,{VERSION:"Unknown"}),o.shim="unknown"):0==+e.majorVersion?(o.event(o.e.SHIM_VERSION,{VERSION:"None"}),o.shim="none"):(o.event(o.e.SHIM_VERSION,{VERSION:e.majorVersion+"."+e.minorVersion}),o.shim=e.majorVersion+"."+e.minorVersion),r.setVersion(+e.majorVersion),n(+e.majorVersion))}var t;t=setTimeout(function(){e({messageType:"shimVersionInfo",majorVersion:"1",minorVersion:"0"})},2e3),s.getVersion(e)},this.openInAcrobat=function(o){var n=this;chrome.tabs.get(o.tabId,function(e){if(e.url&&(o.url=e.url),void 0===o.filename&&(o.filename=r.filenameFromUrl(o.url)),1<r.version){if(o.authenticatedPDF&&1==o.authenticatedPDF)return delete o.authenticatedPDF,"pdf_downloaded"===o.current_status&&o.base64PDF&&s.openInAcrobat(o),void r.sendMessage(o);o.panel_op="status",o.current_status="pdf_downloading",r.sendMessage(o);var t=i.newXHR();t.open("GET",o.url,!0),t.responseType="blob",t.onload=n.proxy(function(e){var n;t.status<400?"application/pdf"===t.response.type?((n=new FileReader).onloadend=function(e){o.base64PDF=e.target.result,s.openInAcrobat(o),o.content_op="status",o.current_status="pdf_downloaded",r.sendMessage({tabId:o.tabId,loaded:o.loaded,filename:o.filename,url:o.url,persist:o.persist,version:o.version,start:o.start,is_pdf:o.is_pdf,newUI:o.newUI,panel_op:o.panel_op,content_op:o.content_op,current_status:"pdf_downloaded"})},n.readAsDataURL(t.response)):(o.authenticatedPDF=!0,r.sendMessage(o)):(o.panel_op="status",o.current_status="pdf_failure",r.sendMessage(o))}),t.send()}else chrome.downloads.download({url:o.url,conflictAction:"uniquify"})})},this.open_converted_file=function(e){s.openFile(e)}})a.hasOwnProperty(t)&&("function"==typeof a[t]?exports[t]=a[t].bind(a):exports[t]=a[t]);return r.registerHandlers({open_in_acrobat:a.proxy(a.openInAcrobat),open_converted_file:a.proxy(a.open_converted_file)}),a});